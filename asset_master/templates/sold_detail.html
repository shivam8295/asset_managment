{% load static%}

{% include 'base_dashboard.html' %}
{% block content %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.css">

<!-- Include FontAwesome CSS (you can change the version if needed) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

<!-- Alert JS -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
<!-- Alert JS -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.js"></script>

<style>
    h2 {
        text-align: center;
    }

    /* Optional: Add custom styling to the Dropzone container */
    /* .dropzone {
        background: white;
        border-radius: 8px;
        min-height: 10px;
        width: 120px;
        padding: 12px;
        text-align: center;
        border: none;
    }

    Optional: Add styling for the icon
    .upload-icon {
        font-size: 40px;
        color: #0087F7;
        margin-bottom: -40px;
    }


    .navbar-second {
        width: 100%;
        background-color: #fff;
        overflow: auto;
        padding-left: 2%;
        border-bottom: 2px solid #CCCCCC;
        padding-bottom: -5px;
    }

   

    

    .avaibtn select {
        color: #007E33;
        background-color: #CCF4DC;
        box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.16);
        border: 1px solid #CCCCCC;
        border-radius: 5px;
        height: 35px;
    }
    /* .navbar-second a {
        float: left;
        padding: 12px;
        color: #7C7C7C;
        text-decoration: none;
        font-size: 15px;
        font-weight: 600;
        text-transform: uppercase;
        cursor: pointer;

    } */

    .navbar-second a svg {
        margin-right: 5px;
    }

    .navbar-second a:hover {
        color: #6A1B9A;
    }

    .active {
        color: #6A1B9A;
        border-bottom: 3px solid #6A1B9A;
    }

    .avaibtn select {
        color: #007E33;
        background-color: #CCF4DC;
        box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.16);
        border: 1px solid #CCCCCC;
        border-radius: 5px;
        height: 35px;
    }

    .tab {
  overflow: hidden;
  border: 1px solid #ccc;
  padding: 0 30px;
  /* background-color: #f1f1f1; */
}

/* Style the buttons inside the tab */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
  border: none;
}

/* Create an active/current tablink class */
.tab button.active {
  border-bottom:2px solid #6A1B9A;
  color: #6A1B9A;
}

/* Style the tab content */
.tabcontent {
  display: none;
  border: 1px solid #ccc;
  border-top: none;
}

/* Set initial display for the first tab content */
#London {
  display: block;
}
button.tablinks {
        float: left;
        padding: 12px;
        color: #7C7C7C;
        text-decoration: none;
        font-size: 15px;
        font-weight: 600;
        text-transform: uppercase;
        display: flex;
        align-items: center;
        
    }
    button.tablinks svg {
        margin-right: 5px;
    }
    a{
        color: #6A1B9A;
    }
</style>
<section class="assetdetail">
    <button onclick="goBack()" style="border: none; margin-bottom: 10px; background-color: transparent;">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: #6A1B9A;transform:msFilter">
            <path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm5 11h-5v4l-5-5 5-5v4h5v2z"></path></svg></button>
    <div class="assetheaderbuttones">
        
        <div class="uploadboxy">
            

                    {% for m in assets %}
                    
                        {% if m.image%}
                                <img src="{%if m.image %}{{m.image.url}}{%endif%}"
                                alt="Upload Image"
                                style="width: 25%;height: 100%;border-radius: 5px;">
                            {%else%}
                                <form action="" class="dropzone" id="imageUpload" enctype="multipart/form-data">
                                    <p style="margin-top: 40%; color: #6A1B9A;cursor: pointer;">Upload</p>
                                    <!-- <div class="upload-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload" viewBox="0 0 16 16">
                                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                                            <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"/>
                                        </svg>
                                    </div> -->
                    
                                </form>
                        {%endif%}
            
            
            <div class="uploadsubbtn">
                <h1>{{m.description}}</h1>
                <div class="avaibtn">
                    <div style="    width: 100px;
                    padding: 5px 20px;
                    background-color: red;
                    color: white;
                    text-align: center;
                    border-radius: 5px;
                ">{% if m.sold_asset == True %}SOLD{% endif %}</div>
                </div>
                <div class="editbtn">
                    <div  class="editicon"><svg
                            xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
                            <path
                                d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
                        </svg><a style = "color: #6A1B9A;" href="/edit-sold-detail/{{m.id}}/">Edit</a></div>
                    <div class="editicon" onclick="clone_asset({m.id})"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z" />
                        </svg>Clone</div>
                    <div class="editicon">
                        <form method="post">
                            {%csrf_token%}
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                                <path
                                    d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z" />
                            </svg><a type="submit" href="/asset-delete/{{m.id}}/">Delete</a>
                        </form>
                        </div>
                        {% comment %} <div class="editicon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-slash-circle"
                            viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                            <path d="M11.354 4.646a.5.5 0 0 0-.708 0l-6 6a.5.5 0 0 0 .708.708l6-6a.5.5 0 0 0 0-.708z" />
                        </svg>Sold</div> {% endcomment %}

                </div>

            </div>
        </div>
        <div class="assebutton" style="gap: 20px; display: flex;">
            {% for m in assets %}               
                {% if m.image%}
                    <button  onclick="removeImage({{m.id}})">Remove image</button>
                {%endif%}
            {%endfor%}
            <button onclick="generate_asset_pdf({{m.id}})">Print Label</button>
            <button>History</button>
            <button>Add to Order</button>
        </div>

    </div>
</section>

<div class="navbar-navi tab">
    <button class="tablinks active" onclick="openCity(event, 'London')"><svg
        xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-list"
        viewBox="0 0 16 16">
        <path
            d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
        <path
            d="M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z" />
    </svg>Details</button>
    <button class="tablinks" onclick="openCity(event, 'Paris')"><svg xmlns="http://www.w3.org/2000/svg"
        width="16" height="16" fill="currentColor" class="bi bi-card-text" viewBox="0 0 16 16">
        <path
            d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z" />
        <path
            d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z" />
    </svg>Orders</button>
    <button class="tablinks" onclick="openCity(event, 'Tokyo')"> <svg xmlns="http://www.w3.org/2000/svg"
        width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
        <path
            d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z" />
        <path
            d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z" />
    </svg>Repairs</button>
  </div>

<div id="London" class="tabcontent active">
    
  <section class="assetdetail-detail">

    <div class="assetdetail-containing">

        <div class="assetdetail-contain mt-0">
            <h1><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#6A1B9A"
                    class="bi bi-file-earmark-bar-graph" viewBox="0 0 16 16">
                    <path
                        d="M10 13.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v6zm-2.5.5a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1zm-3 0a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-1z" />
                    <path
                        d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z" />
                </svg>Core Information</h1>
            <div class="detialasset mt-4">
                <div class="detialasset-name">
                    <p>category</p>
                    <div class="bndname">
                      {% if m.category == nan %}
                        --
                      {% else %}
                      {{ m.category }}
                      {% endif %}
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>sub category</p>
                    <div class="bndname">
                      {% if m.sub_category == nan %}
                        --
                      {% else %}
                      {{ m.sub_category }}
                      {% endif %}
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>brand</p>
                    <div class="bndname">
                        {{m.brand}}
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>model number</p>
                    <div class="bndname">
                      {% if m.model_no == nan %}
                        --
                      {% else %}
                      {{ m.model_no }}
                      {% endif %}</div>
                      

                </div>
                
                <div class="detialasset-name">
                    <p >serial number</p>
                    <div class="bndname">
                        {{m.serial_no}}
                    </div>

                </div>

                <div class="detialasset-name">
                    <p>last service date</p>
                    <div class="bndname">
                        {% if m.last_service_date == nan %}
                        --
                      {% else %}
                      {{ m.last_service_date| date:'d-m-Y' }}
                      {% endif %}
                    </div>

                </div>

            </div>
            <div class="detialasset-name" style="width: 98%;margin: 0 auto;gap: 65px;">
                <p style="width: 500px;">description</p>
                <div class="bndname" style="width: 100%;">
                  {% if m.description == nan or m.description == "" %}
                    --
                  {% else %}
                  {{ m.description}}
                  {% endif %}
                </div>

            </div>

        </div>
         {% endfor %}
         <br>
         <div class="assetdetail-contain mt-0">
            <h1><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#6A1B9A" class="bi bi-distribute-horizontal" viewBox="0 0 16 16" style="margin-right: 5px;">
                <path fill-rule="evenodd" d="M14.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 1 0v-13a.5.5 0 0 0-.5-.5m-13 0a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 1 0v-13a.5.5 0 0 0-.5-.5"/>
                <path d="M6 13a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z"/>
              </svg>UoM (Unit of Measurement)</h1>
            {% for m in assets%}
            <div class="detialasset mt-4">
                <div class="detialasset-name">
                    <p>Length</p>
                    <div class="bndname">
                        <div class="bndname">
                            {% if m.length == nan %}
                              --
                            {% else %}
                            {{ m.length }}
                            {% endif %}</div>
                            
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>Breadth</p>
                    <div class="bndname">
                        {% if m.breadth == nan or m.breadth == "" %}
                        --
                      {% else %}
                      {{ m.breadth}}
                      {% endif %}
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>Height</p>
                    <div class="bndname">
                        {% if m.height == nan or m.height == "" %}
                        --
                      {% else %}
                      {{ m.height}}
                      {% endif %}
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>Weight</p>
                    <div class="bndname">
                        {% if m.width == nan or m.width == "" %}
                        --
                      {% else %}
                      {{ m.width}}
                      {% endif %}
                    </div>

                </div>

            </div>
           {% endfor %}

        </div>

         <br>
         <div class="assetdetail-contain mt-0">
            <h1><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#6A1B9A" class="bi bi-person-lines-fill" viewBox="0 0 16 16" style="margin-right: 5px;">
                <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5m.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z"/>
              </svg> Product Engineering Support Info</h1>
            {% for m in assets %}
            <div class="detialasset mt-4">
                <div class="detialasset-name">
                    <p>Warranty Period</p>
                    <div class="bndname">
                      {% if m.warranty_period == nan or m.warranty_period == "" %}
                        --
                      {% else %}
                      {{ m.warranty_period}}
                      {% endif %}
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>Under AMC</p>
                    <div class="bndname">
                        <select class="form-select" onchange="setUnderAMC({{m.id}})" name="boolean_field1" aria-label="Default select example">
                            <option selected {% if m.under_amc == None %}selected{% endif %} disabled>SELECT</option>
                            <option value="1" {% if m.under_amc == True %}selected{% endif %}>YES</option>
                            <option value="2" {% if m.under_amc == False %}selected{% endif %}>NO</option>
                          </select>
                    </div>

                </div>
                <div class="detialasset-name">
                    <p>AMC Date</p>
                    <div class="bndname">
                    {% if m.amc_date == nan or m.amc_date == "" %}
                    --
                  {% else %}
                  {{ m.amc_date | date:'d-m-Y'}}
                  {% endif %}
                    </div>
                </div>    
            </div>
        {% endfor %}

        </div>
         <br>
        <div class="assetdetail-contain">
            <h1><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                    style="fill: #6A1B9A;transform: ;msFilter">
                    <path
                        d="M15.999 8.5h2c0-2.837-2.755-4.131-5-4.429V2h-2v2.071c-2.245.298-5 1.592-5 4.429 0 2.706 2.666 4.113 5 4.43v4.97c-1.448-.251-3-1.024-3-2.4h-2c0 2.589 2.425 4.119 5 4.436V22h2v-2.07c2.245-.298 5-1.593 5-4.43s-2.755-4.131-5-4.429V6.1c1.33.239 3 .941 3 2.4zm-8 0c0-1.459 1.67-2.161 3-2.4v4.799c-1.371-.253-3-1.002-3-2.399zm8 7c0 1.459-1.67 2.161-3 2.4v-4.8c1.33.239 3 .941 3 2.4z">
                    </path>
                </svg>Pricing</h1>
            {% for m in assets %}
            <div class="detialasset mt-4">
                <div class="detialasset-name">
                    <p>Rental Pricing

                    </p>
                    <div class="bndname">
                        {% if m.rental_pricing == nan or m.rental_pricing == "" %}
                        --
                      {% else %}
                      {{ m.rental_pricing}}
                      {% endif %}
                    </div>
                        

                </div>
                <div class="detialasset-name">
                    <p>Rent Collected
                    </p>
                    <div class="bndname">
                        {% if m.rent_collected == nan or m.rent_collected == "" %}
                        --
                      {% else %}
                      {{ m.rent_collected}}
                      {% endif %}
                    </div>

                </div>
                


            </div>

        {% endfor %}
        </div>

       
       
        
        
    </div>
    <div class="leftfile">
        <div class="assetdetail-containing mt-3">
            <div class="filebtny">
                <h1><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        style="fill: #6A1B9A;transform: ;msFilter:;">
                        <path
                            d="M19.903 8.586a.997.997 0 0 0-.196-.293l-6-6a.997.997 0 0 0-.293-.196c-.03-.014-.062-.022-.094-.033a.991.991 0 0 0-.259-.051C13.04 2.011 13.021 2 13 2H6c-1.103 0-2 .897-2 2v16c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2V9c0-.021-.011-.04-.013-.062a.952.952 0 0 0-.051-.259c-.01-.032-.019-.063-.033-.093zM16.586 8H14V5.414L16.586 8zM6 20V4h6v5a1 1 0 0 0 1 1h5l.002 10H6z">
                        </path>
                        <path d="M8 12h8v2H8zm0 4h8v2H8zm0-8h2v2H8z"></path>
                    </svg>Files</h1>
                {% for m in assets %}
                    <button id="uploadButton" onclick="document.getElementById('attachfile').click()">+ Attach file</button>
                    <input type="file" id="attachfile" onchange="uploadFile({{m.id}})" style="display: none;">
                {% endfor %}
            </div>
            <div class="navbar-navi">

                <div class="navbar-second" id="navbar2" style="padding: 0; border: none;">
                    <a id="ASSET DOCUMENTS" class="active" > ASSET
                        DOCUMENTS</a>
                    <!-- <a  id="GROUP DOCUMENTS"  onclick="setActive('navbar2','GROUP DOCUMENTS')">GROUP DOCUMENTS</a>   -->

                </div>
            </div>
            <div class="filint" id="attachFile">
                {% for m in attached_files %}               
                    {% if m.attached_file  %}
                    <div class="commrntline">
                        <li >{{m.attached_file}}</li>
                        <div>
                       <a href="{{m.attached_file.url}}" download ><li ></li>Download</a>    
                       <button id="deletefile" style="background: transparent; border: none; color: red;" onclick="delete_attached_file({{m.id}}, {{m.asset_id.id}})">Delete</button>    
                    </div>       
                </div>       
                    {% else %}
                        <p>No File Found</p>
                    {%endif%}
                {% endfor %}

            </div>

        </div>
        <div class="assetdetail-containing mt-3">
            <div class="filebtny">
                <h1><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        style="fill: #6A1B9A;transform: ;msFilter:;">
                        <path
                            d="M4 18h2v4.081L11.101 18H16c1.103 0 2-.897 2-2V8c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v8c0 1.103.897 2 2 2z">
                        </path>
                        <path
                            d="M20 2H8c-1.103 0-2 .897-2 2h12c1.103 0 2 .897 2 2v8c1.103 0 2-.897 2-2V4c0-1.103-.897-2-2-2z">
                        </path>
                    </svg>Comments

                </h1>


            </div>
            <div class="filint">
            {% for m in comments%}
            
                <div class="commrntline">
                    <li style="width: 90%;">{{m.comment}}</li>
                    <li style="width: 65%;">{{m.date_time}}</li>
                    
                </div>                    
            {%endfor%}
        </div>

            {% for m in assets %}
                <div class="addcmtbtn">
                    <textarea name="comment" id="commentText" cols="30" rows="10" style="height: 40px; background-color: #fff; border-radius: 5px; border: none; padding: 5px; width: 70%; border: 1px solid #CCCCCC;
                "></textarea>
                    <!-- <button onclick="update_comment({{m.id}})" value="">Add comment</button> -->
                    <button onclick="update_comment_again({{m.id}})" value="">Add comment</button>
                    <!-- <button value=""><a href="/get-edit-asset-detail-comment-again/{{m.id}}/">get comment again</a></button> -->
                </div>
            {% endfor %}

        </div>
    </div>

    

</section>
        </div>

        <div id="Paris" class="tabcontent">
            <section  class="assetdetail-detail " >
        
                <div class="assetdetail-containing">
                   
                    <div class="assetdetail-contain mt-0">
                        <h1><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#6A1B9A" class="bi bi-journal" viewBox="0 0 16 16">
                            <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/>
                            <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/>
                          </svg>Order Details</h1>
                        <div class="order-navisection mt-4">
                            <div class=" naviorder-sec">
        
                                
                                
                                <div class="dropdown">
                                    <button class=" dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="height: 40px; text-transform: uppercase;    border: 1px solid #CCCCCC;
                                    color: #7C7C7C !important;
                                    background-color: #FFFFFF;
                                    border-radius: 5px;
                                    padding: 0 20px;  ">
                                      Filter
                                    </button>
                                    <ul class="dropdown-menu">
                                      <li><a class="dropdown-item" href="#">Order Number</a></li>
                                      <li><a class="dropdown-item" href="#">Order Date</a></li>
                                      <li><a class="dropdown-item" href="#">Order Status</a></li>
                                      <li><a class="dropdown-item" href="#">Order Delivery Date</a></li>
                                      <li><a class="dropdown-item" href="#">Payment Status</a></li>
                                      <li><a class="dropdown-item" href="#">Order Location</a></li>
                                  
                                    </ul>
                                  </div>
                                      
            
                        </div>
                        <div class="filint">
                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#A1A1A1" class="bi bi-journal-text" viewBox="0 0 16 16">
                                <path d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
                                <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/>
                                <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/>
                              </svg>
                            <p>This Asset is not present in any Order.

                            </p>
            
                        </div> 
                       
                        
            
                    </div>
                   
                   
                  
                </div>
                
            
                </div>
            
            </section>
          </div>

          <div id="Tokyo" class="tabcontent">
            <section  class="assetdetail-detail " >
        
                <div class="assetdetail-containing">
                   
                    <div class="assetdetail-contain mt-0">
                        <h1><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#6A1B9A" class="bi bi-journal" viewBox="0 0 16 16">
                            <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/>
                            <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/>
                          </svg>Repairs</h1>
                        <div class="order-navisection mt-4">
                            <div class=" naviorder-sec">
        
                                
                                
                                <div class="dropdown">
                                    <button class=" dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="height: 40px; text-transform: uppercase;    border: 1px solid #CCCCCC;
                                    color: #7C7C7C !important;
                                    background-color: #FFFFFF;
                                    border-radius: 5px;
                                    padding: 0 20px;  ">
                                      Filter
                                    </button>
                                    <ul class="dropdown-menu">
                                      <li><a class="dropdown-item" href="#">Order Number</a></li>
                                      <li><a class="dropdown-item" href="#">Order Date</a></li>
                                      <li><a class="dropdown-item" href="#">Order Status</a></li>
                                      <li><a class="dropdown-item" href="#">Order Delivery Date</a></li>
                                      <li><a class="dropdown-item" href="#">Payment Status</a></li>
                                      <li><a class="dropdown-item" href="#">Order Location</a></li>
                                  
                                    </ul>
                                  </div>
                                      
            
                        </div>
                        <div class="filint">
                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#A1A1A1" class="bi bi-journal-text" viewBox="0 0 16 16">
                                <path d="M5 10.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5"/>
                                <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2"/>
                                <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z"/>
                              </svg>
                            <p>This Asset is not present in any Repairs.

                            </p>
            
                        </div> 
                       
                        
            
                    </div>
                   
                   
                  
                </div>
                
            
                </div>
            
            </section>
          </div> 
        




        <script>
            function openCity(evt, cityName) {
              var i, tabcontent, tablinks;
              tabcontent = document.getElementsByClassName("tabcontent");
              for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
              }
              tablinks = document.getElementsByClassName("tablinks");
              for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
              }
              document.getElementById(cityName).style.display = "block";
              evt.currentTarget.className += " active";
            }
            </script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script>
            document.getElementById('deleteButton').addEventListener('click', function() {
                axios({
                    method: 'delete',
                    url: '/asset-delete/{{m.id}}/',
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}'  // Include CSRF token in the headers
                    }
                })
                .then(function (response) {
                    console.log('Asset deleted successfully:', response);
                    // Optionally, redirect or perform other actions after successful deletion
                    window.location.href = '/asset-list/';
                })
                .catch(function (error) {
                    console.error('Error deleting asset:', error);
                });
            });
        </script>




<script>
    // Customize your Dropzone options as needed
    Dropzone.options.imageUpload = {
        paramName: "image", // The name that will be used to transfer the file
        maxFilesize: 2, // MB
        // acceptedFiles: "image/*",
        addRemoveLinks: true, // Display remove link
        dictDefaultMessage: "<span style='font-size: 14px; color:#6A1B9A; ' > Upload </span>",
        // dictRemoveFile: "Remove",
        // init: function () {
            // this.on("success", function (file, response) {
            //     // Handle success
            //     console.log(response);
            // });
            // this.on("error", function (file, response) {
            //     // Handle error
            //     console.error(response);
            // });
        };
</script>

<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
<script>
    {% if messages %}
        {% for msg in messages %}
            alertify.set('notifier','position', 'top-right');
            alertify.success('{{msg}}');
        {% endfor %}
    {% endif %}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>   
  function removeImage(id) {
        $.ajax({
            type: "POST",
            url: "/delete-asset-detail-image/", 
            data:{"id":id, "csrfmiddlewaretoken":"{{csrf_token}}"},
            success: function(response) {
                location.reload(); 
            }
          
        });
    }
   </script>
<script>   
  function clone_asset(id) {
        $.ajax({
            type: "POST",
            url: "/clone-asset/", 
            data:{"id":id, "csrfmiddlewaretoken":"{{csrf_token}}"},
            success: function(response) {
                window.location.href = "/sold-list/" 
                 
            }
          
        });
    }
   </script>

   <script>
    function delete_attached_file(id, asset_id) {
    let spinner = ` <div id="spinner">
            <div class="d-flex justify-content-center">
                <div class="spinner-border" role="status">
                  <span class="visually-hidden"></span>
                </div>
              </div>
        </div> `
        $('#attachFile').html(spinner)
    $.ajax({
        type: "POST",
        url: "/delete-attached-file/",
        data: {
            'id': id,
            'asset_id': asset_id,
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        success: function (response) {
            setTimeout(function () {
                window.location.reload(); 
            }, 1000);      
        },
        error: function (xhr, status, error) {
            console.error("Error updating comment:", error);
        }
    });
}
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
function generate_asset_pdf(id) {
    $.ajax({
        type: "GET",
        url: "/export-to-pdf/",
        data: { id: id },
        success: function(response) {
            var blob = new Blob([response], { type: 'application/pdf' });
            var url = window.URL.createObjectURL(blob);
            window.open(url);
        },
        error: function(xhr, status, error) {
            console.error(error);
            alert('Failed to generate PDF.');
        }
    });
}
</script>

<script>
    function setUnderAMC(id) {
        var selectedValue = $('select[name="boolean_field1"]').val();
        $.ajax({
            type: 'POST',
            url: '/asset-detail-set-under-amc/', 
            data: {
                csrfmiddlewaretoken: '{{ csrf_token }}',
                id: id,
                boolean_field: selectedValue
            },
            success: function(response) {
                alertify.set('notifier','position', 'top-right');
                alertify.success('Under AMC edited successfully');
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
            }
        });
    }
</script>

<script>
function uploadFile(id) {
    var fileInput = document.getElementById('attachfile');
    var selectedFile = fileInput.files[0];

    if (selectedFile) { 
        var formData = new FormData();
        formData.append('file', selectedFile);
        formData.append('id', id);

        $.ajax({
            type: "POST",
            url: "/attach-file-to-asset/",
            data: formData,
            processData: false,
            contentType: false,
            headers: {
                "X-CSRFToken": "{{ csrf_token }}"
            },
            success: function(response) {
                window.location.reload()

            },
            error: function(xhr, status, error) {
                window.location.reload()
            }
        });
    }
}
</script>

<script>
    function update_comment(id) {
        var comment = $('#commentText').val(); 
        $.ajax({
            type: "POST",
            url: "/edit-asset-detail-comment/", 
            data: {
                'id': id,
                'comment': comment,
                'csrfmiddlewaretoken': '{{ csrf_token }}'  
            },
            success: function(response) {
                window.location.reload()
                // alertify.set('notifier','position', 'top-right');
                // alertify.success('Comment Updated...');

            },
            error: function(xhr, status, error) {
                console.error("Error updating comment:", error);
            }
        });
    }
</script>

<script>
    function update_comment_again(id) {
        var comment = $('#commentText').val(); 
        $.ajax({
            type: "POST",
            url: "/edit-asset-detail-comment-again/", 
            data: {
                'id': id,
                'comment': comment,
                'csrfmiddlewaretoken': '{{ csrf_token }}'  
            },
            success: function(response) {
                window.location.reload()
                // alertify.set('notifier','position', 'top-right');
                // alertify.success('Comment Updated...');

            },
            error: function(xhr, status, error) {
                console.error("Error updating comment:", error);
            }
        });
    }
</script>


<script>
    function get_update_comment_again(id) {
        var comment = $('#commentText').val(); 
        $.ajax({
            type: "GET",
            url: "/get-edit-asset-detail-comment-again/", 
            data: { id: id },

            success: function(response) {
            var blob = new Blob([response], { type: 'application/pdf' });
            var url = window.URL.createObjectURL(blob);
            window.open(url);
        },
        error: function(xhr, status, error) {
            console.error(error);
            alert('Failed to generate PDF.');
        }
    });
    }
</script>





{% endblock content %}